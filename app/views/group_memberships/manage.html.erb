<div class="gmm-container" style="max-width: 800px; margin: 0 auto; padding: 2rem 1rem; background-color: #f3f4f6; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">
  <div class="gmm-header" style="display: flex; flex-direction: column; align-items: center; margin-bottom: 2rem; text-align: center;" id="gmmHeader">
    <h1 style="font-size: 2rem; font-weight: 600; color: #1a202c; margin-bottom: 0.5rem;">Manage Group Members</h1>
    <p style="color: #4b5563; font-size: 1rem; margin-bottom: 1rem;">Add new members or manage existing ones in <%= @group.name %></p>
  </div>

  <div class="gmm-search" style="margin-bottom: 2rem;" id="gmmSearch">
    <input type="text" id="gmm-search-input" placeholder="Search users..." style="width: 100%; padding: 0.75rem 1rem; font-size: 1rem; border: 1px solid #d1d5db; border-radius: 0.375rem; transition: all 0.3s ease;">
  </div>

  <div class="gmm-content" style="display: grid; grid-template-columns: 1fr; gap: 2rem;" id="gmmContent">
    <div class="gmm-card" style="background-color: white; border-radius: 1rem; padding: 1.5rem; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);">
      <h2 style="font-size: 1.25rem; font-weight: 500; color: #1a202c; margin-bottom: 1.5rem; text-align: center;">Group Members</h2>
      <div class="gmm-list" id="gmm-members" style="max-height: 400px; overflow-y: auto;">
        <% @all_users.each do |user| %>
          <div class="gmm-member-item" data-user-id="<%= user.id %>" data-name="<%= user.full_name.downcase %>" style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; border-bottom: 1px solid #e2e8f0; transition: all 0.3s ease;">
            <div style="flex: 1;">
              <p style="font-weight: 500; color: #1a202c; font-size: 1rem;"><%= user.full_name %></p>
              <p style="font-size: 0.875rem; color: #4b5563;"><%= user.email %></p>
            </div>
            <div>
              <% if user == current_user %>
                <span style="font-size: 0.875rem; color: #4b5563;">You</span>
              <% elsif user == @group.leader %>
                <span style="font-size: 0.875rem; color: #4b5563;">Leader</span>
              <% else %>
                <button class="gmm-action-btn <%= @group.users.include?(user) ? 'gmm-remove-btn' : 'gmm-add-btn' %>"
                        data-user-id="<%= user.id %>"
                        style="background-color: <%= @group.users.include?(user) ? '#EF4444' : '#10B981' %>; color: white; font-weight: 500; padding: 0.5rem 1rem; border-radius: 0.375rem; border: none; cursor: pointer; transition: all 0.3s ease;">
                  <%= @group.users.include?(user) ? 'Remove' : 'Add' %>
                </button>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>




<style>
    @media (max-width: 640px) {
        .gmm-content {
            grid-template-columns: 1fr;
        }
    }

    .gmm-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
    }

    .gmm-member-item:hover {
        background-color: #f3f4f6;
    }

    .gmm-action-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .gmm-add-btn:hover {
        background-color: #059669;
    }

    .gmm-remove-btn:hover {
        background-color: #DC2626;
    }

    .animate-in {
        animation: fadeInUp 0.5s ease-out forwards;
    }

    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const searchInput = document.getElementById('gmm-search-input');
        const membersList = document.getElementById('gmm-members');

        // Search functionality
        searchInput.addEventListener('input', () => {
            const searchTerm = searchInput.value.toLowerCase();
            document.querySelectorAll('.gmm-member-item').forEach(item => {
                const name = item.dataset.name;
                item.style.display = name.includes(searchTerm) ? 'flex' : 'none';
            });
        });

        // Toggle member functionality
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('gmm-add-btn') || e.target.classList.contains('gmm-remove-btn')) {
                const button = e.target;
                const userId = button.dataset.userId;
                const isAdding = button.classList.contains('gmm-add-btn');

                // Toggle button appearance
                button.classList.toggle('gmm-add-btn');
                button.classList.toggle('gmm-remove-btn');
                button.style.backgroundColor = isAdding ? '#EF4444' : '#10B981';
                button.textContent = isAdding ? 'Remove' : 'Add';

                // Here you would typically send an AJAX request to update the server
                // For now, we're just updating the UI optimistically
                console.log(`User ${userId} ${isAdding ? 'added to' : 'removed from'} the group`);
            }
        });
    });
</script>